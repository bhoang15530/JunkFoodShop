    <!-- breadcrumb-section -->
<div class="breadcrumb-section breadcrumb-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2 text-center">
                <div class="breadcrumb-text">
                    <p>Fresh and Organic</p>
                    <h1>Ratings</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end breadcrumb section -->
@if (!ViewBag.IsBoughtProduct)
{
    <div class="container my-4 mx-auto"><h3>The order must be successfuly delivered to comment</h3></div>
}
else
{
    <div class="comment-template container my-4 mx-auto">
        <h4>Leave a comment</h4>
        <p>If you have a comment dont feel hesitate to send us your opinion.</p>
        <form asp-action="SaveRatings" asp-controller="User" method="post" id="rating-form">
            <div class="col-lg-12">
                <div class="form-group">
                    <label>Ratings</label>
                    <br />
                    <p>
                        @if (ViewBag.Rating != null)
                        {
                            string[] idArray = { "first", "second", "third", "fourth", "fifth" };
                            for (int i = 0; i < ViewBag.Rating.Star; i++)
                            {
                                <label id="@idArray[i]" class="bi bi-star-fill" style="color: yellow">
                                    <input name="star" class="sr-only" type="radio" value="@(i + 1)" required>
                                </label>
                            }
                            // star = 4
                            //      i <= 1 => fifth
                            // star = 3
                            //      i <= 5 - 3 -> 2 => fourth, fifth
                            for (int i = ViewBag.Rating.Star; i < 5; i++)
                            {
                                <label id="@idArray[i]" class="bi bi-star-fill" style="color: #ccc">
                                    <input name="star" class="sr-only" type="radio" value="@(i + 1)" required>
                                </label>
                            }
                        }
                        else
                        {
                            <label id="first" class="bi bi-star-fill">
                                <input name="star" class="sr-only" type="radio" value="1" required>
                            </label>
                            <label id="second" class="bi bi-star-fill">
                                <input name="star" class="sr-only" type="radio" value="2">
                            </label>
                            <label id="third" class="bi bi-star-fill">
                                <input name="star" class="sr-only" type="radio" value="3">
                            </label>
                            <label id="fourth" class="bi bi-star-fill">
                                <input name="star" class="sr-only" type="radio" value="4">
                            </label>
                            <label id="fifth" class="bi bi-star-fill">
                                <input name="star" class="sr-only" type="radio" value="5">
                            </label>
                        }
                    </p>
                </div>
            </div>

            @if (ViewBag.Rating != null)
            {
                <input type="hidden" name="ratingId" value="@ViewBag.Rating.RatingId" />
            }

            @if (ViewBag.Comment != null)
            {
                <input type="hidden" name="commentId" value="@ViewBag.Comment.CommentId" />
                <div class="form-group">
                    <label for="commentContent">Your comment</label>
                    <textarea class="w-100 form-control" id="Comment" name="commentContent" cols="30" rows="10" placeholder="Your Message">@ViewBag.Comment.Content</textarea>
                    <span class="form-message"></span>
                </div>
            }
            else
            {
                <div class="form-group">
                    <label for="commentContent">Your comment</label>
                    <textarea class="w-100 form-control" id="Comment" name="commentContent" cols="30" rows="10" placeholder="Your Message"></textarea>
                    <span class="form-message"></span>
                </div>
            }
            <input type="hidden" name="foodId" value="@ViewBag.FoodId" />
            <p><input type="submit" value="Submit"></p>
        </form>
    </div>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <script src="~/js/validator.js"></script>
    <script>
        $(document).ready(function () {
            var selectedValue;

            Validator({
                form: "#rating-form",
                errorSelector: ".form-message",
                rules: [
                    Validator.isRequired(
                        "#Comment",
                        "Comment is required"
                    ),
                    Validator.minLength(
                        "#Comment",
                        3,
                        "Comment must greater than 3 characters"
                    ),
                ],
            });

            function highlightFirstStar() {
                $("#first, #second, #third, #fourth, #fifth").css("color", "#ccc");
                $("#first").css("color", "yellow")
            }

            function highlightSecondStar() {
                $("#first, #second, #third, #fourth, #fifth").css("color", "#ccc");
                $("#first, #second").css("color", "yellow")
            }

            function highlightThirdStar() {
                $("#first, #second, #third, #fourth, #fifth").css("color", "#ccc");
                $("#first, #second, #third").css("color", "yellow")
            }

            function highlightFourthStar() {
                $("#first, #second, #third, #fourth, #fifth").css("color", "#ccc");
                $("#first, #second, #third, #fourth").css("color", "yellow")
            }

            function highlightFifthStar() {
                $("#first, #second, #third, #fourth, #fifth").css("color", "#ccc");
                $("#first, #second, #third, #fourth, #fifth").css("color", "yellow")
            }

            $("#first").click(highlightFirstStar);

            $("#second").click(highlightSecondStar);

            $("#third").click(highlightThirdStar);

            $("#fourth").click(highlightFourthStar);

            $("#fifth").click(highlightFifthStar);

            $("input[name='star']").each(function (index, element) {
                $(element).click(function () {
                    selectedValue = $(element).val();
                })
            });
        })
    </script>
}